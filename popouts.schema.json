{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Popout Capture Registry",
  "description": "Persisted bindings for MSFS pop-out window capture",
  "type": "object",
  "properties": {
    "bindings": {
      "type": "array",
      "description": "Array of window capture bindings",
      "items": {
        "$ref": "#/definitions/binding"
      }
    }
  },
  "required": ["bindings"],
  "definitions": {
    "binding": {
      "type": "object",
      "description": "A single pop-out window binding",
      "properties": {
        "key": {
          "type": "string",
          "description": "Logical identifier (e.g., 'PFD', 'MFD', 'COM1')",
          "minLength": 1
        },
        "preferExact": {
          "type": "string",
          "description": "Exact window title to prefer on next startup"
        },
        "titleRx": {
          "type": "string",
          "description": "Regular expression pattern for fuzzy title matching",
          "minLength": 1
        },
        "lastSourceName": {
          "type": "string",
          "description": "Last used desktopCapturer source name"
        },
        "lastBounds": {
          "type": "array",
          "description": "Last known window bounds [x, y, width, height]",
          "items": {
            "type": "number"
          },
          "minItems": 4,
          "maxItems": 4
        }
      },
      "required": ["key", "titleRx"]
    }
  }
}
